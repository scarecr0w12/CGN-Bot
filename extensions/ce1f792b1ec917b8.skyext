const message = require('message');
const utils = require('utils');
const embed = require('embed');

const symbolData = [
	{ item: 'ğŸ’', weight: 30 },
	{ item: 'ğŸ‹', weight: 25 },
	{ item: 'ğŸŠ', weight: 20 },
	{ item: 'ğŸ‡', weight: 15 },
	{ item: 'ğŸ’', weight: 7 },
	{ item: '7ï¸âƒ£', weight: 2 },
	{ item: 'â­', weight: 1 }
];

const reel1 = utils.random.weighted(symbolData);
const reel2 = utils.random.weighted(symbolData);
const reel3 = utils.random.weighted(symbolData);

const payouts = {
	'ğŸ’': 3, 'ğŸ‹': 5, 'ğŸŠ': 7, 'ğŸ‡': 10, 'ğŸ’': 25, '7ï¸âƒ£': 100, 'â­': 50
};

let result = '';
let color = embed.colors.DEFAULT;

if (reel1 === reel2 && reel2 === reel3) {
	const multiplier = payouts[reel1];
	result = 'ğŸ‰ ' + utils.discord.bold('JACKPOT!') + ' Three ' + reel1 + ' = ' + utils.discord.bold(multiplier + 'x') + ' payout!';
	color = reel1 === '7ï¸âƒ£' ? embed.colors.GOLD : embed.colors.SUCCESS;
} else if (reel1 === reel2 || reel2 === reel3 || reel1 === reel3) {
	result = 'ğŸ˜Š ' + utils.discord.bold('Two of a kind!') + ' Small win!';
	color = embed.colors.BLUE;
} else {
	result = 'ğŸ˜” No match. Better luck next time!';
	color = embed.colors.ERROR;
}

message.reply({
	embeds: [embed.create({
		title: 'ğŸ° Slot Machine',
		description: 'â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n' +
			'â–¶ï¸ | ' + reel1 + ' | ' + reel2 + ' | ' + reel3 + ' | â—€ï¸\n' +
			'â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\n' + result,
		color: color,
		footer: { text: 'Spin again to try your luck!' }
	})]
});