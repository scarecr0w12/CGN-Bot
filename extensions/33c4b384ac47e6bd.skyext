const message = require('message');
const command = require('command');
const utils = require('utils');
const embed = require('embed');

const input = command.suffix.trim();

if (!input) {
	message.reply({
		embeds: [embed.create({
			title: 'ğŸ’¬ Quote Image',
			description: 'Usage: quoteimg <quote text> | <author>\n\nExample: quoteimg Be yourself | Oscar Wilde',
			color: embed.colors.ERROR,
		})],
	});
	return;
}

let quoteText, author;
if (input.includes('|')) {
	const parts = input.split('|').map(p => p.trim());
	quoteText = parts[0];
	author = parts[1] || 'Unknown';
} else {
	quoteText = input;
	author = message.author.username;
}

// Style it nicely with Discord formatting
const styledQuote = 'â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—\n' +
'â•‘\n' +
'â•‘   ' + utils.discord.italic('"' + quoteText.slice(0, 100) + '"') + '\n' +
'â•‘\n' +
'â•‘         â€” ' + utils.discord.bold(author.slice(0, 30)) + '\n' +
'â•‘\n' +
'â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•';

message.reply({
	embeds: [embed.create({
		description: styledQuote,
		color: embed.colors.BLUE,
		footer: { text: 'Quote by ' + author },
	})],
});