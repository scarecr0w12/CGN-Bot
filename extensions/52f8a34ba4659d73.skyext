const message = require('message');
const command = require('command');
const embed = require('embed');

const text = command.suffix.trim();

if (!text) {
	message.reply({
		embeds: [embed.create({
			title: 'ğŸ’­ Change My Mind',
			description: 'Usage: changemymind <your opinion>

Example: changemymind Pineapple belongs on pizza',
			color: embed.colors.ERROR,
		})],
	});
	return;
}

const encodedText = encodeURIComponent(text.slice(0, 100));
const imageUrl = 'https://api.popcat.xyz/changemymind?text=' + encodedText;

message.reply({
	embeds: [embed.create({
		title: 'ğŸ’­ Change My Mind',
		image: { url: imageUrl },
		color: embed.colors.BLUE,
		footer: { text: text.slice(0, 50) + (text.length > 50 ? '...' : '') },
	})],
});