const message = require('message');
const command = require('command');
const utils = require('utils');
const embed = require('embed');

const tiles = ['â¬›', 'â¬œ', 'ğŸšª', 'ğŸ’€', 'ğŸ’°', 'ğŸ§ª', 'âš”ï¸'];
const weights = [
	{ item: 'â¬œ', weight: 40 },
	{ item: 'â¬›', weight: 25 },
	{ item: 'ğŸšª', weight: 10 },
	{ item: 'ğŸ’€', weight: 10 },
	{ item: 'ğŸ’°', weight: 8 },
	{ item: 'ğŸ§ª', weight: 4 },
	{ item: 'âš”ï¸', weight: 3 },
];

let map = '';
let monsters = 0, loot = 0;

for (let i = 0; i < 5; i++) {
	for (let j = 0; j < 5; j++) {
		if (i === 2 && j === 2) {
			map += 'ğŸ‘¤ ';
		} else {
			const tile = utils.random.weighted(weights);
			map += tile + ' ';
			if (tile === 'ğŸ’€') monsters++;
			if (tile === 'ğŸ’°') loot++;
		}
	}
	map += '\n';
}

const floor = utils.random.int(1, 10);

message.reply({
	embeds: [embed.create({
		title: 'ğŸ° Dungeon - Floor ' + floor,
		description: map + '\n' +
			'**Stats:**\n' +
			'ğŸ’€ Monsters: ' + monsters + '\n' +
			'ğŸ’° Loot: ' + loot,
		color: embed.colors.PURPLE,
		footer: { text: 'ğŸ‘¤ You | â¬œ Empty | ğŸšª Door | ğŸ’€ Monster | ğŸ’° Loot | ğŸ§ª Potion | âš”ï¸ Weapon' },
	})]
});