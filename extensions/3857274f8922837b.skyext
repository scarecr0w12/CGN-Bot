const message = require('message');
const command = require('command');
const embed = require('embed');

const text = command.suffix.trim();

if (!text) {
	message.reply({
		embeds: [embed.create({
			title: 'ğŸ‘¹ Zalgo',
			description: 'Usage: zalgo <text>',
			color: embed.colors.ERROR,
		})],
	});
	return;
}

const zalgoUp = ['Ì', 'Ì', 'Ì„', 'Ì…', 'Ì¿', 'Ì‘', 'Ì†', 'Ì', 'Í’', 'Í—', 'Í‘', 'Ì‡', 'Ìˆ', 'ÌŠ', 'Í‚', 'Ì“', 'ÌˆÌ', 'ÍŠ', 'Í‹', 'ÍŒ', 'Ìƒ', 'Ì‚', 'ÌŒ', 'Í', 'Ì€', 'Ì', 'Ì‹', 'Ì', 'Ì’', 'Ì“', 'Ì”', 'Ì½', 'Ì‰', 'Í£', 'Í¤', 'Í¥', 'Í¦', 'Í§', 'Í¨', 'Í©', 'Íª', 'Í«', 'Í¬', 'Í­', 'Í®', 'Í¯', 'Ì¾', 'Í›', 'Í†', 'Ìš'];
const zalgoMid = ['Ì•', 'Ì›', 'Ì€', 'Ì', 'Í˜', 'Ì¡', 'Ì¢', 'Ì§', 'Ì¨', 'Ì´', 'Ìµ', 'Ì¶', 'Íœ', 'Í', 'Í', 'ÍŸ', 'Í ', 'Í¢', 'Ì¸', 'Ì·', 'Í¡'];
const zalgoDown = ['Ì–', 'Ì—', 'Ì˜', 'Ì™', 'Ìœ', 'Ì', 'Ì', 'ÌŸ', 'Ì ', 'Ì¤', 'Ì¥', 'Ì¦', 'Ì©', 'Ìª', 'Ì«', 'Ì¬', 'Ì­', 'Ì®', 'Ì¯', 'Ì°', 'Ì±', 'Ì²', 'Ì³', 'Ì¹', 'Ìº', 'Ì»', 'Ì¼', 'Í…', 'Í‡', 'Íˆ', 'Í‰', 'Í', 'Í', 'Í“', 'Í”', 'Í•', 'Í–', 'Í™', 'Íš', 'Ì£'];

function zalgoify(str, intensity = 3) {
	let result = '';
	for (const char of str) {
		result += char;
		if (char !== ' ') {
			for (let i = 0; i < intensity; i++) {
				result += zalgoUp[Math.floor(Math.random() * zalgoUp.length)];
				result += zalgoMid[Math.floor(Math.random() * zalgoMid.length)];
				result += zalgoDown[Math.floor(Math.random() * zalgoDown.length)];
			}
		}
	}
	return result;
}

const zalgoText = zalgoify(text.slice(0, 100));

message.reply({
	embeds: [embed.create({
		title: 'ğŸ‘¹ ZÌ·Ì¢aÌ¶Ì¡lÌµÌ¨gÌ¶Ì¢oÌ·Ì§',
		description: zalgoText,
		color: embed.colors.ERROR,
	})],
});